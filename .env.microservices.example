# =============================================================================
# HT Base Microservices - Environment Configuration
# =============================================================================
# Copy this file to .env.microservices and fill in your values
# Usage: docker compose -f docker-compose.microservices.yml --env-file .env.microservices up
# =============================================================================

# =============================================================================
# Environment
# =============================================================================
ENVIRONMENT=production
VERSION=latest
REGISTRY=

# =============================================================================
# Database Configuration
# =============================================================================
DB_USER=htbase
DB_PASSWORD=CHANGE_ME_TO_SECURE_PASSWORD
DB_NAME=htbase
DB_PORT=5432

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_PORT=6379

# =============================================================================
# API Gateway Configuration
# =============================================================================
API_PORT=8080
API_WORKERS=4
CORS_ORIGINS=https://app.htbase.com,https://htbase.com
API_RATE_LIMIT=100/minute

# Default archivers to run (comma-separated)
DEFAULT_ARCHIVERS=singlefile,monolith,readability,pdf,screenshot
ENABLE_SUMMARIZATION=true

# =============================================================================
# Worker Concurrency Settings
# =============================================================================
# Adjust based on your VPS resources
# Chrome-based archivers need more memory, lower concurrency

SINGLEFILE_CONCURRENCY=2
MONOLITH_CONCURRENCY=3
READABILITY_CONCURRENCY=5
PDF_CONCURRENCY=3
SCREENSHOT_CONCURRENCY=3
SUMMARIZATION_CONCURRENCY=5
STORAGE_CONCURRENCY=10

# =============================================================================
# Storage Configuration
# =============================================================================
# Provider: gcs or local
STORAGE_PROVIDER=gcs
COMPRESSION_ENABLED=true
CLEANUP_AFTER_UPLOAD=true

# Local storage path (mounted volume)
ARTIFACTS_PATH=./data/artifacts

# GCS Configuration (leave empty if using local only)
GCS_BUCKET=your-gcs-bucket-name
GCS_PROJECT_ID=your-gcp-project-id
GCS_CREDENTIALS_PATH=./secrets/gcs-credentials.json

# =============================================================================
# LLM Provider Configuration
# =============================================================================
# Provider: huggingface, openai, or mock (for testing)
LLM_PROVIDER=huggingface

# HuggingFace TGI Configuration
HUGGINGFACE_API_URL=https://your-tgi-endpoint.com
HUGGINGFACE_API_KEY=your-hf-api-key

# OpenAI Configuration (fallback or primary)
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_MODEL=gpt-4o-mini

# Chunking configuration
CHUNK_SIZE=4000
CHUNK_OVERLAP=200

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# Monitoring (Optional - use --profile monitoring)
# =============================================================================
FLOWER_PORT=5555
FLOWER_USER=admin
FLOWER_PASSWORD=CHANGE_ME_FLOWER_PASSWORD

REDIS_COMMANDER_PORT=8081
REDIS_COMMANDER_USER=admin
REDIS_COMMANDER_PASSWORD=CHANGE_ME_REDIS_COMMANDER_PASSWORD

# =============================================================================
# Reverse Proxy (Optional - use --profile proxy)
# =============================================================================
# Domain for SSL certificate
DOMAIN=htbase.example.com
